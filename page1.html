<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Player</title>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        background: #000;
        height: 100vh;
        width: 100vw;
        overflow: hidden;
    }

    iframe {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        border: none;
    }

    .error {
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 20%;
        font-size: 18px;
    }
</style>
</head>

<body>

<div id="playerContainer"></div>

<script>
function getQueryParam(name) {
    const params = new URLSearchParams(window.location.search);
    return params.get(name);
}

function extractVideoId(url) {
    try {
        const decodedUrl = decodeURIComponent(url);

        // Support dai.ly short links
        if (decodedUrl.includes("dai.ly")) {
            return decodedUrl.split("/").pop();
        }

        // Support full dailymotion links
        if (decodedUrl.includes("dailymotion.com/video/")) {
            return decodedUrl.split("/video/")[1].split("_")[0];
        }

        return null;
    } catch (e) {
        return null;
    }
}

function loadVideo() {
    const linkParam = getQueryParam("link");

    if (!linkParam) {
        document.body.innerHTML = '<div class="error">No video link provided</div>';
        return;
    }

    const videoId = extractVideoId(linkParam);

    if (!videoId) {
        document.body.innerHTML = '<div class="error">Invalid Dailymotion link</div>';
        return;
    }

    const embedUrl = `https://www.dailymotion.com/embed/video/${videoId}?autoplay=1`;

    const iframe = document.createElement("iframe");
    iframe.src = embedUrl;
    iframe.allow = "autoplay; fullscreen";
    iframe.allowFullscreen = true;

    document.getElementById("playerContainer").appendChild(iframe);
}

loadVideo();
</script>

</body>
</html>
